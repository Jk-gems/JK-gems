<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>J.K Gems - Exquisite Gemstones & Spiritual Items</title>
    <meta name="description" content="Explore exquisite gemstones, Rudraksha, and spiritual items from J.K Gems, a trusted firm serving Junagadh since 1965.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;600;700&family=Lora:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* --- Color Palette Variables (Inspired by NSL Forge, Adapted for JK Gems) --- */
        :root {
            /* Adapted Palette Colors */
            --color-accent-tan: #B68D40;      /* Used for secondary accents, like Tan in NSL Forge */
            --color-light-cream: #F4EBD0;     /* Used for main text on dark, like Cream in NSL Forge */
            --color-dark-charcoal: #122620;   /* Used for main dark backgrounds, like Charcoal in NSL Forge */
            --color-bg-surface: #182D26;      /* Used for card/modal backgrounds, slightly lighter charcoal */
            --color-accent-gold: #D6AD60;     /* Used for primary accents, links, buttons, like Gold in NSL Forge */

            /* Semantic Mapping to Adapted Palette */
            --primary-color: var(--color-accent-gold);    /* Gold as primary accent */
            --secondary-color: var(--color-accent-tan);   /* Tan as secondary accent */
            --background-color: var(--color-dark-charcoal); /* Deep Charcoal background */
            --surface-color: var(--color-bg-surface);     /* Lighter Charcoal surfaces */
            --text-color-dark: var(--color-light-cream);  /* Cream for main text/headings */
            --text-color-medium: var(--color-light-cream);/* Cream for general body text */
            --text-color-secondary: var(--color-accent-tan); /* Tan for secondary text/descriptions */
            --border-color: #2A3C36;                      /* Dark border color */

            --whatsapp-green: #25D366; /* Standard WhatsApp green remains */
            --whatsapp-green-hover: #1DA851;

            --footer-text-color: var(--text-color-secondary); /* Tan for footer text */

            --section-padding-vertical: 100px;
            --section-padding-horizontal: 25px;

             /* Shadows inspired by NSL Forge */
            --shadow-deep: 0 12px 24px rgba(0,0,0,0.7);
            --shadow-medium: 0 8px 16px rgba(0,0,0,0.6);
            --shadow-light: 0 4px 8px rgba(0,0,0,0.5);

            /* Gradients inspired by NSL Forge */
            --gradient-primary: linear-gradient(90deg, var(--primary-color), var(--secondary-color)); /* Gold to Tan */
            --gradient-highlight: linear-gradient(90deg, var(--primary-color), var(--color-accent-tan)); /* Gold to Tan */


            /* Button Colors adapted for the dark theme */
            --button-primary-bg: var(--primary-color); /* Use Gold */
            --button-primary-text: var(--background-color); /* Dark text on gold */
            --button-primary-hover-bg: var(--secondary-color); /* Tan on hover */
            --button-primary-hover-text: var(--background-color);

            --button-secondary-bg: var(--secondary-color); /* Use Tan */
            --button-secondary-text: var(--background-color); /* Dark text on tan */
            --button-secondary-hover-bg: var(--primary-color); /* Gold on hover */
            --button-secondary-hover-text: var(--background-color);

             /* Error color */
             --color-alert: #cf6679;
             --color-error-text: #cf6679;
        }


        /* --- Base Styles --- */
        body {
            font-family: 'Lato', sans-serif;
            font-weight: 400;
            margin: 0;
            padding: 0;
            background-color: var(--background-color);
            color: var(--text-color-medium);
            line-height: 1.6;
            overflow-x: hidden;
            scroll-behavior: smooth;
             /* Subtle Dark Background Pattern adapted from NSL Forge concept */
            background-image: linear-gradient(45deg, #1f1f1f 25%, transparent 25%, transparent 75%, #1f1f1f 75%, #1f1f1f),
                              linear-gradient(-45deg, #1f1f1f 25%, transparent 25%, transparent 75%, #1f1f1f 75%, #1f1f1f);
            background-size: 20px 20px; /* Adjust size as needed */
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Lora', serif;
            color: var(--primary-color); /* Headings use Gold */
            line-height: 1.3;
            margin-top: 0;
             letter-spacing: 0.5px;
        }

        h2 {
            font-size: 2.8em;
            margin-bottom: 40px;
            text-align: center;
            font-weight: 700;
            position: relative;
            padding-bottom: 15px;
        }
         h2::after {
             content: ''; position: absolute; bottom: 0; left: 50%;
             transform: translateX(-50%); height: 3px; width: 80px;
             background: var(--gradient-primary); /* Gold to Tan gradient underline */
             border-radius: 2px;
         }


        h3 {
            font-size: 1.8em;
            margin-bottom: 20px;
            font-weight: 600;
            color: var(--text-color-dark); /* Subheadings use Cream */
        }

        p {
            margin-bottom: 1.2em;
            color: var(--text-color-medium); /* Paragraphs use Cream */
        }

        a {
            color: var(--primary-color); /* Links use Gold */
            text-decoration: none;
            transition: color 0.3s ease;
        }

        a:hover {
            color: var(--secondary-color); /* Links turn Tan on hover */
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--section-padding-horizontal);
        }

        .section {
            padding: var(--section-padding-vertical) 0;
            text-align: center;
             background-color: var(--background-color); /* Ensure section background matches body */
             border-bottom: 1px solid var(--border-color);
             position: relative;
             overflow: hidden;

             /* Initial state for scroll-in animation */
             opacity: 0;
             transform: translateY(30px);
             transition: opacity 0.8s ease-out, transform 0.8s ease-out;
             will-change: transform, opacity;
        }
         /* Sections that should start visible (like Hero) */
         .section:first-of-type { /* Assuming hero is the first section */
             opacity: 1;
             transform: none;
             transition: none;
         }
          /* The 'is-visible' class overrides the initial state */
         .section.is-visible {
             opacity: 1;
             transform: translateY(0);
         }

        .section:last-of-type {
             border-bottom: none;
             margin-bottom: 0;
        }


        /* --- Header/Navigation --- */
        .header {
            background-color: var(--surface-color); /* Header background is Lighter Charcoal */
            padding: 10px 0; /* Reduced padding */
            text-align: center;
            box-shadow: var(--shadow-medium); /* Medium shadow */
            position: static; /* Changed from fixed to static */
            width: 100%;
            top: 0;
            left: 0;
            z-index: 1000;
        }

        .header .container {
             display: flex;
             justify-content: space-between;
             align-items: center;
             flex-wrap: wrap;
             padding: 0 20px; /* Consistent horizontal padding */
        }

        .header img {
            max-width: 160px;
            height: auto;
            display: block;
            margin: 0;
             transition: transform 0.3s ease;
        }
         .header img:hover {
             transform: scale(1.05);
         }


        .nav {
            margin-top: 0;
            display: flex;
            align-items: center;
        }

        .nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
        }

        .nav li {
            margin-left: 30px;
        }

        .nav a {
            color: var(--text-color-secondary); /* Nav links color is Tan */
            font-family: 'Lato', sans-serif;
            font-weight: 600;
            font-size: 1.1em;
            padding: 5px 0;
            position: relative;
            transition: color 0.3s ease, transform 0.2s ease;
             /* Added focus state for keyboard navigation */
            outline: none;
        }
         /* Custom focus style */
         .nav a:focus {
              color: var(--text-color-dark); /* Cream on focus */
              outline: 2px solid var(--primary-color); /* Gold outline */
              outline-offset: 3px;
              border-radius: 2px;
         }

        .nav a::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 0;
            height: 2px;
            background: var(--gradient-primary); /* Gradient underline */
            transition: width 0.4s ease-in-out;
        }

        .nav a:hover, .nav a.active { color: var(--text-color-dark); transform: translateY(-2px);} /* Cream on hover/active */
        .nav a:hover::after, .nav a.active::after { width: 100%; }

        /* Cart Icon in Header */
        .cart-icon-container {
            margin-left: 30px;
            position: relative;
            cursor: pointer;
            color: var(--text-color-secondary); /* Icon color is Tan */
            font-size: 1.5em;
            transition: color 0.3s ease, transform 0.3s ease;
             /* Added focus state */
            outline: none;
            padding: 5px; /* Add padding for easier clicking/focusing */
            border-radius: 4px;
        }

        .cart-icon-container:hover {
            color: var(--primary-color); /* Hover color is Gold */
            transform: scale(1.1);
        }
         .cart-icon-container:focus {
             color: var(--primary-color); /* Gold on focus */
             outline: 2px solid var(--primary-color); /* Gold outline */
             outline-offset: 2px;
         }


        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: #e74c3c; /* Red remains visible */
            color: white;
            font-size: 0.7em;
            font-weight: 700;
            border-radius: 50%;
            padding: 2px 6px;
            line-height: 1;
            min-width: 10px;
            text-align: center;
            display: none; /* Hidden by default */
        }

         /* Theme Switch Styling - REMOVED as theme is now permanent */


         /* Responsiveness: Adjustments for Header/Navigation */
         @media (max-width: 768px) {
             .header .container {
                 flex-direction: column;
             }
             .header img {
                 margin-bottom: 15px;
             }
             .nav {
                 flex-direction: column;
                 align-items: center;
                 width: 100%;
             }
             .nav ul {
                 flex-direction: column;
                 align-items: center;
                 width: 100%;
                 margin-bottom: 15px;
             }
             .nav li {
                 margin: 10px 0;
                 width: 100%;
                 border-bottom: 1px solid rgba(255, 255, 255, 0.1); /* Subtle separator */
                 padding-bottom: 10px;
             }
             .nav li:last-child {
                 border-bottom: none;
                 padding-bottom: 0;
             }
             .nav a {
                 display: block;
                 text-align: center;
                 color: var(--text-color-dark); /* Cream for mobile links */
             }
              .nav a::after {
                content: none; /* Remove underline animation on mobile */
            }
              .nav a:hover, .nav a.active {
                 color: var(--primary-color); /* Gold on hover/active */
                 transform: none; /* Remove translateY effect */
            }
             .cart-icon-container {
                 margin-left: 0;
                 margin-top: 10px;
             }
             .header {
                 padding: 15px 0;
             }
         }


        /* --- Hero Section --- */
        .hero {
            position: relative;
            height: 600px;
            /* High-Quality Visuals: Placeholder for your hero background image */
            background: linear-gradient(rgba(18, 38, 32, 0.9), rgba(18, 38, 32, 0.9)), url('YOUR_HERO_IMAGE_URL.jpg') no-repeat center center/cover; /* Dark overlay + Background Image */
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            overflow: hidden;
            background-attachment: fixed; /* Parallax effect */
            padding: var(--section-padding-vertical) 0;
            /* Ensure hero is fully visible on load */
            opacity: 1;
            transform: none;
            transition: none;
        }

        /* --- 3D Background Animation in Hero --- */
        .hero-background-animation {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%; /* Covers the full width */
            height: 100%; /* Covers the full height */
            overflow: hidden; /* Hide parts that rotate outside */
            z-index: 0; /* Ensure it's behind the hero content */
            perspective: 1000px; /* Add perspective to the container for 3D effect */
        }

        .hero-background-animation::before {
            content: '';
            position: absolute;
            /* Position relative to the animation container */
            top: 50%; /* Center vertically */
            left: 50%; /* Center horizontally */
            width: 300px; /* Size of the rotating element */
            height: 300px; /* Size of the rotating element */
            transform-style: preserve-3d; /* Allow child (or itself) to have 3D position */
            transform: translate(-50%, -50%) rotateX(45deg) rotateY(45deg); /* Center and initial rotation */
            /* Subtle gem-like appearance */
            background: linear-gradient(135deg, rgba(214, 173, 96, 0.2) 0%, rgba(182, 141, 64, 0.2) 50%, rgba(214, 173, 96, 0.2) 100%); /* Subtle Gold/Tan gradient with opacity */
            border: 1px solid rgba(182, 141, 64, 0.3); /* Subtle border */
            box-shadow: 0 0 20px rgba(214, 173, 96, 0.4); /* Subtle glow */
            opacity: 0.4; /* Make it translucent */
            animation: rotateShape 30s infinite linear; /* Apply animation */
            pointer-events: none; /* Ensure it doesn't interfere with clicks */
             /* You could make this a more complex shape using clip-path if needed */
            /* clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); /* Example Hexagon */
        }


        @keyframes rotateShape {
            0% {
                transform: translate(-50%, -50%) rotateX(0deg) rotateY(0deg) rotateZ(0deg);
            }
            100% {
                transform: translate(-50%, -50%) rotateX(360deg) rotateY(360deg) rotateZ(360deg); /* Rotate around multiple axes */
            }
        }

        /* Ensure hero-content stays on top */
        .hero .hero-content {
            position: relative; /* Already has z-index: 2 */
            z-index: 2; /* Make sure content is above the background animation */
        }

        /* Optional: Make it slightly smaller/faster on smaller screens */
        @media (max-width: 1024px) {
            .hero-background-animation::before {
                width: 250px;
                height: 250px;
                animation-duration: 25s; /* Faster rotation */
            }
        }
        @media (max-width: 768px) {
            .hero-background-animation::before {
                width: 200px;
                height: 200px;
                animation-duration: 20s; /* Faster rotation */
            }
        }
        @media (max-width: 480px) {
            .hero-background-animation::before {
                width: 150px;
                height: 150px;
                animation-duration: 15s; /* Even faster */
            }
        }


        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
             /* Removed redundant overlay - integrated into background */
            z-index: 1; /* Ensure overlay is between animation (0) and content (2) */
        }

        .hero .container {
            position: relative;
            z-index: 2; /* Ensure container content is above overlay and animation */
            text-align: center;
        }


        .hero .container h1 {
            color: var(--text-color-dark); /* Cream heading on overlay */
            font-size: 4em;
            margin-bottom: 20px;
            font-weight: 700;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);
        }

        .hero .container p {
            color: var(--text-color-medium); /* Cream text */
            font-size: 1.3em;
            margin-bottom: 30px;
            text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.4);
        }

        .hero-cta-button {
            display: inline-block;
            background: var(--gradient-primary); /* Gold to Tan gradient */
            color: var(--background-color); /* Dark Charcoal text */
            padding: 15px 30px;
            font-size: 1.2em;
            font-weight: 700;
            border-radius: 30px; /* Pill shape */
            transition: background 0.4s ease, transform 0.3s ease-out, box-shadow 0.4s ease, color 0.4s ease;
            box-shadow: var(--shadow-medium); /* Medium shadow */
             border: none;
            cursor: pointer;
            overflow: hidden;
            position: relative;
            z-index: 1;
             /* Added focus state */
            outline: none;
        }
        .hero-cta-button::before {
             content: '';
             position: absolute;
             top: 0;
             left: -100%;
             width: 100%;
             height: 100%;
             background: var(--gradient-highlight); /* Gold to Tan gradient */
             transition: left 0.4s ease-out;
             z-index: -1;
         }

        .hero-cta-button:hover::before {
            left: 0;
        }

        .hero-cta-button:hover {
             background: transparent; /* Transparent background on hover */
             color: var(--text-color-dark); /* Cream text on hover */
             transform: translateY(-4px); /* More pronounced lift */
             box-shadow: var(--shadow-deep); /* Deeper shadow */
        }
         .hero-cta-button:focus {
             outline: 2px solid var(--primary-color); /* Gold outline */
             outline-offset: 3px;
             border-radius: 30px;
         }


        /* --- About Us & Contact Section (Consolidated) --- */
        .about-contact .container {
            text-align: left;
             display: flex;
             flex-wrap: wrap;
             align-items: flex-start;
             gap: 40px;
             justify-content: center;
        }

         .about-content, .contact-info {
             flex: 1;
             min-width: 300px;
         }

        .about-contact h2 {
            text-align: center;
            width: 100%;
            margin-bottom: 50px;
        }

         .about-content h3, .contact-info h3 {
             text-align: left;
             margin-bottom: 20px;
             font-size: 1.7em;
             color: var(--text-color-dark); /* Cream subheadings */
         }

        .about-contact p {
            font-size: 1.05em;
            margin-bottom: 1.2em;
            color: var(--text-color-medium); /* Cream text */
        }

        .about-contact address {
             font-style: normal;
             margin-top: 15px;
             font-size: 1.05em;
             line-height: 1.7;
             color: var(--text-color-medium); /* Cream text */
             margin-bottom: 20px;
         }

         .contact-info p {
             margin-bottom: 12px;
             color: var(--text-color-medium); /* Cream text */
             font-size: 1.05em;
         }

         .contact-info p i {
             margin-right: 12px;
             color: var(--secondary-color); /* Icons use Tan */
             font-size: 1.2em;
             width: 20px;
             text-align: center;
         }

        /* --- Products/Categories Section --- */
        .products .container {
             /* No grid directly on container anymore */
        }

        /* Grid for Categories AND Products (applied to nested containers) */
        .category-grid,
        .category-products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }


        .product {
            /* REFINED CARD STYLE */
            border: 1px solid var(--border-color); /* Dark border */
            padding: 0;
            text-align: left;
            background-color: var(--surface-color); /* Lighter Charcoal background */
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: var(--shadow-light); /* Light shadow */
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease, background-color 0.3s ease;
        }
        .product:hover {
             transform: translateY(-5px); /* Lift on hover */
             box-shadow: var(--shadow-medium); /* Medium shadow on hover */
             border-color: var(--primary-color); /* Gold border on hover */
             background-color: #2a3d36; /* Slightly different background on hover */
        }


        .product img {
            width: 100%;
            height: 280px;
            object-fit: cover;
            margin-bottom: 0;
            border-bottom: 1px solid var(--border-color); /* Dark border */
            transition: transform 0.3s ease, border-color 0.3s ease, filter 0.3s ease;
            cursor: zoom-in;
            filter: brightness(0.9); /* Slightly dimmed initially */
             /* Added focus state for keyboard navigation */
             outline: none;
        }
        .product img:hover {
             transform: scale(1.05); /* Zoom on hover */
             filter: brightness(1.1); /* Brighter on hover */
             border-color: var(--primary-color); /* Gold border on hover */
        }
         .product img:focus {
             outline: 3px solid var(--primary-color); /* Gold outline */
             outline-offset: 3px;
             border-color: var(--primary-color);
             filter: brightness(1.1);
         }


        .product-info {
            padding: 15px;
            display: flex;
            flex-direction: column;
            flex-grow: 1;
             /* Removed transparent background */
            position: relative;
            z-index: 2;
            text-align: left;
        }


        .product-info h3 {
            margin-top: 0;
            margin-bottom: 6px;
            font-size: 1.4em;
            color: var(--primary-color); /* Gold for product titles */
            font-weight: 700;
            font-family: 'Lora', serif;
        }

        .product-info p.product-description {
            font-size: 0.9em;
            color: var(--text-color-secondary); /* Tan for description */
            margin-bottom: 12px;
            flex-grow: 1;
            line-height: 1.5;
        }


        .product-price {
            font-size: 1.1em;
            font-weight: 700;
            color: var(--secondary-color); /* Price color is Tan */
            margin-bottom: 15px;
            min-height: 1.5em;
        }

        /* Add to Cart Button */
        .add-to-cart-button {
            display: block;
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            background-color: var(--button-primary-bg); /* Primary Button style */
            color: var(--button-primary-text);
            border: none;
            border-radius: 5px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease;
            text-align: center;
             /* Added focus state */
            outline: none;
        }

        .add-to-cart-button:hover {
            background-color: var(--button-primary-hover-bg);
            color: var(--button-primary-hover-text);
             transform: translateY(-2px); /* Subtle lift */
        }
         .add-to-cart-button:focus {
              outline: 2px solid var(--secondary-color); /* Tan outline */
              outline-offset: 2px;
              border-radius: 5px;
         }


        /* Clear Calls to Action: WhatsApp button */
        .whatsapp-button {
            display: block;
            width: calc(100% - 0px);
            margin: 0 0 0 0;
            padding: 12px;
            background-color: var(--whatsapp-green);
            color: white;
            text-decoration: none;
            border-radius: 0 0 8px 8px;
            font-size: 1em;
            font-weight: 600;
            letter-spacing: 0.5px;
            box-shadow: none;
            text-align: center;
            transition: background-color 0.3s ease, transform 0.2s ease;
             /* Added focus state */
            outline: none;
        }

        .whatsapp-button i {
            margin-right: 8px;
        }

        .whatsapp-button:hover {
            background-color: var(--whatsapp-green-hover);
            transform: translateY(-2px); /* Subtle lift */
            box-shadow: none;
        }
         .whatsapp-button:focus {
              outline: 2px solid var(--secondary-color); /* Tan outline */
              outline-offset: 2px;
              border-radius: 0 0 8px 8px;
         }


         /* User-Friendly Navigation: Search function layout */
         .search-container {
             margin-bottom: 30px;
             text-align: center;
         }

         .search-container input {
            width: calc(100% - 40px);
            max-width: 500px;
            padding: 12px 20px;
            border: 1px solid var(--border-color); /* Dark border */
            border-radius: 25px;
            font-size: 1em;
            box-sizing: border-box;
            box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.3);
            transition: border-color 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease, color 0.3s ease;
            color: var(--text-color-medium); /* Cream text */
            background-color: var(--surface-color); /* Lighter Charcoal background */
            outline: none;
         }


        .search-container input::placeholder {
             color: var(--text-color-secondary); /* Tan placeholder */
         }


        .search-container input:focus {
            border-color: var(--primary-color); /* Gold focus border */
            box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.3), 0 0 8px rgba(214, 173, 96, 0.6); /* Gold focus glow */
            outline: none;
        }

         /* Style for the hidden product containers and back button */
         .category-products-container {
             display: none;
             text-align: left;
             margin-top: 30px;
         }

         .category-products-container h3 {
             text-align: center;
             margin-bottom: 30px;
             font-size: 2em;
             color: var(--primary-color); /* Gold heading */
         }

         .back-to-categories, .back-to-cart, .back-to-billing {
             display: inline-block;
             margin-bottom: 30px;
             font-size: 1.1em;
             color: var(--text-color-secondary); /* Back links color is Tan */
             transition: color 0.3s ease;
             cursor: pointer;
             /* Added focus state */
            outline: none;
            border-radius: 4px;
            padding: 5px;
         }

         .back-to-categories i, .back-to-cart i, .back-to-billing i {
             margin-right: 8px;
         }

         .back-to-categories:hover, .back-to-cart:hover, .back-to-billing:hover {
             color: var(--primary-color); /* Hover color is Gold */
             text-decoration: underline;
         }
         .back-to-categories:focus, .back-to-cart:focus, .back-to-billing:focus {
             color: var(--primary-color); /* Gold on focus */
             outline: 2px solid var(--primary-color); /* Gold outline */
             outline-offset: 2px;
         }


        /* --- Image Modal/Lightbox --- */
        #imageModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95); /* Darker overlay */
            z-index: 9999;
            justify-content: center;
            align-items: center;
        }

        #imageModal span {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 40px;
            color: white;
            cursor: pointer;
            transition: color 0.3s ease;
             /* Added focus state */
            outline: none;
            padding: 5px;
            border-radius: 4px;
        }

        #imageModal span:hover {
            color: var(--secondary-color); /* Tan on hover */
        }
         #imageModal span:focus {
             color: var(--secondary-color); /* Tan on focus */
             outline: 2px solid var(--secondary-color); /* Tan outline */
             outline-offset: 2px;
         }


        #modalImage {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.9); /* Stronger shadow */
             border: 1px solid var(--primary-color); /* Gold border */
             border-radius: 8px;
        }


         /* --- Cart Modal Styling --- */
         #cartModal {
             display: none;
             position: fixed;
             z-index: 10000;
             left: 0;
             top: 0;
             width: 100%;
             height: 100%;
             overflow: auto;
             background-color: rgba(0, 0, 0, 0.8); /* Darker dim background */
             justify-content: center;
             align-items: center;
         }


         .cart-modal-content {
             background-color: var(--surface-color); /* Lighter Charcoal background */
             margin: auto;
             padding: 30px;
             border-radius: 10px;
             width: 90%;
             max-width: 600px;
             box-shadow: var(--shadow-deep); /* Deep shadow */
             position: relative;
             max-height: 80vh;
             overflow-y: auto;
             text-align: left;
             border: 1px solid var(--border-color); /* Dark border */
         }


         .cart-modal-content h2 {
             text-align: center;
             margin-top: 0;
             margin-bottom: 20px;
             color: var(--primary-color); /* Gold heading */
              padding-bottom: 10px;
         }
          .cart-modal-content h2::after {
              height: 2px; width: 50px; /* Thinner, shorter underline */
          }


         .cart-modal-content .close {
             position: absolute;
             top: 15px;
             right: 25px;
             color: var(--text-color-secondary); /* Tan close button */
             font-size: 35px;
             font-weight: bold;
             cursor: pointer;
             transition: color 0.3s ease;
              /* Added focus state */
            outline: none;
            padding: 5px;
            border-radius: 4px;
         }

         .cart-modal-content .close:hover,
         .cart-modal-content .close:focus {
             color: var(--primary-color); /* Gold on hover/focus */
         }


         #cartItemsList {
             list-style: none;
             padding: 0;
             margin: 0;
         }

         #cartItemsList li {
             border-bottom: 1px solid var(--border-color); /* Dark border */
             padding: 15px 0;
             display: flex;
             justify-content: space-between;
             align-items: center;
             font-size: 1.1em;
             color: var(--text-color-medium); /* Cream text */
         }

         #cartItemsList li:last-child {
             border-bottom: none;
         }

         .item-details .item-name {
             font-weight: 600;
             color: var(--text-color-dark); /* Cream item name */
         }

         .item-details .item-quantity {
             font-size: 0.9em;
             color: var(--text-color-secondary); /* Tan quantity */
         }

         .item-details .item-price {
              color: var(--primary-color); /* Gold price */
         }


         .remove-item {
             background-color: #e74c3c; /* Red remains visible */
             color: white;
             border: none;
             border-radius: 4px;
             padding: 5px 10px;
             cursor: pointer;
             font-size: 0.9em;
             transition: background-color 0.3s ease, transform 0.2s ease;
              /* Added focus state */
            outline: none;
         }

         .remove-item:hover {
             background-color: #c0392b; /* Darker red */
             transform: scale(1.05); /* Subtle scale */
         }
          .remove-item:focus {
              outline: 2px solid var(--secondary-color); /* Tan outline */
              outline-offset: 2px;
              border-radius: 4px;
          }


         .cart-total {
             margin-top: 20px;
             text-align: right;
             font-size: 1.3em;
             font-weight: 700;
             color: var(--primary-color); /* Total color is Gold */
             padding-top: 15px;
             border-top: 1px solid var(--border-color); /* Dark border */
         }


         .checkout-button {
             display: block;
             width: 100%;
             padding: 12px;
             margin-top: 20px;
             background-color: var(--button-primary-bg); /* Primary button style */
             color: var(--button-primary-text);
             border: none;
             border-radius: 5px;
             font-size: 1.1em;
             font-weight: 700;
             text-align: center;
             cursor: pointer;
             transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease;
              /* Added focus state */
            outline: none;
         }

         .checkout-button:hover {
             background-color: var(--button-primary-hover-bg);
             color: var(--button-primary-hover-text);
              transform: translateY(-2px); /* Subtle lift */
         }
          .checkout-button:focus {
               outline: 2px solid var(--secondary-color); /* Tan outline */
               outline-offset: 2px;
               border-radius: 5px;
          }


         /* Styling for empty cart message */
         #emptyCartMessage {
            text-align: center;
            color: var(--text-color-secondary); /* Tan text */
            margin-top: 20px;
            font-size: 1.1em;
         }


         /* --- Billing Section Styling --- */
         #billingSection {
             display: none; /* Hidden by default, shown by JS */
             text-align: left;
             margin-top: 40px;
             padding-top: 40px;
             border-top: 1px solid var(--border-color); /* Dark border */
         }

         /* Added rule to ensure billing inputs are block when section is visible */
         #billingSection[style*="display: block"] #billingInputs {
             display: block !important;
         }


         #billingSection h2 {
             text-align: center;
             margin-bottom: 30px;
         }

         #billingForm {
             /* Initially visible, managed by JS */
         }

          #billingForm label {
             display: block;
             margin-bottom: 8px;
             font-weight: 600;
             color: var(--text-color-dark); /* Cream label */
         }


         #billingForm input[type="text"],
         #billingForm input[type="email"],
         #billingForm input[type="tel"],
         #billingForm textarea {
             width: calc(100% - 22px);
             padding: 10px;
             margin-bottom: 20px;
             border: 1px solid var(--border-color); /* Dark border */
             border-radius: 4px;
             font-size: 1em;
             box-sizing: border-box;
             transition: border-color 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease, color 0.3s ease;
             color: var(--text-color-medium); /* Cream text */
             background-color: var(--surface-color); /* Lighter Charcoal background */
             outline: none;
         }


        #billingForm input[type="text"]:focus,
        #billingForm input[type="email"]:focus,
        #billingForm input[type="tel"]:focus,
        #billingForm textarea:focus {
            border-color: var(--primary-color); /* Gold focus border */
            outline: none;
            box-shadow: 0 0 8px rgba(214, 173, 96, 0.6); /* Gold glow */
        }

          /* Style for invalid input */
          #billingForm input:invalid,
          #billingForm textarea:invalid {
              border-color: var(--color-alert); /* Alert color for invalid */
              box-shadow: 0 0 8px rgba(207, 102, 121, 0.6); /* Alert color glow */
          }


         #orderSummaryReview {
             margin-bottom: 30px;
             padding: 20px;
             border: 1px solid var(--border-color); /* Dark border */
             border-radius: 8px;
             background-color: var(--surface-color); /* Lighter Charcoal background */
             box-shadow: var(--shadow-light); /* Light shadow */
         }

         #orderSummaryReview h3 {
             margin-top: 0;
             margin-bottom: 15px;
             font-size: 1.5em;
             text-align: center;
             color: var(--text-color-dark); /* Cream subheading */
             padding-bottom: 8px;
         }
          #orderSummaryReview h3::after {
               content: ''; position: absolute; bottom: 0; left: 50%;
               transform: translateX(-50%); height: 2px; width: 40px;
               background: var(--primary-color); /* Gold underline */
               border-radius: 1px;
          }


         #orderSummaryReview ul {
             list-style: none;
             padding: 0;
             margin: 0;
         }

         #orderSummaryReview li {
             border-bottom: 1px dashed var(--border-color); /* Dark dashed border */
             padding: 10px 0;
             font-size: 1em;
             color: var(--text-color-medium); /* Cream text */
             display: flex;
             justify-content: space-between;
         }

         #orderSummaryReview li:last-child {
             border-bottom: none;
         }

         #orderSummaryReview .item-name {
             font-weight: 600;
             flex-grow: 1;
             margin-right: 10px;
             color: var(--text-color-dark); /* Cream item name */
         }

          #orderSummaryReview .item-price {
             font-weight: 600;
             text-align: right;
             color: var(--secondary-color); /* Tan price */
          }


         /* Styles for the total, discount, and final total in review */
          .total-line {
              margin-top: 10px;
              padding-top: 10px;
              border-top: 1px solid var(--border-color); /* Dark border */
              text-align: right;
              color: var(--text-color-medium); /* Cream text */
          }

          .total-line span {
              display: inline-block;
              min-width: 100px;
          }

          .total-line strong {
              font-size: 1.1em;
              color: var(--text-color-dark); /* Cream text */
          }


           .discount-line {
               color: #2ecc71; /* Green for discount */
               font-weight: 600;
               margin-top: 5px;
               text-align: right;
           }


          .final-total-line {
              margin-top: 10px;
              padding-top: 10px;
              border-top: 2px solid var(--primary-color); /* Gold border */
              font-size: 1.3em;
              font-weight: 700;
              color: var(--primary-color); /* Gold total */
              text-align: right;
          }


         /* Coupon Section Styling */
          .coupon-section {
              margin-top: 20px;
              margin-bottom: 30px;
              padding: 15px;
              border: 1px solid var(--border-color); /* Dark border */
              border-radius: 8px;
              background-color: #3a3a3a; /* Slightly different dark background */
              display: flex;
              flex-wrap: wrap;
              gap: 10px;
              align-items: center;
              box-shadow: var(--shadow-light); /* Light shadow */
          }


           .coupon-section label {
               margin-bottom: 0;
               margin-right: 10px;
               font-weight: 600;
               color: var(--text-color-dark); /* Cream label */
           }


          .coupon-section input[type="text"] {
              flex-grow: 1;
              min-width: 150px;
              margin-bottom: 0;
              padding: 8px;
              border-radius: 4px;
              border: 1px solid var(--border-color); /* Dark border */
              transition: border-color 0.3s ease, background-color 0.3s ease, color 0.3s ease;
              color: var(--text-color-medium); /* Cream text */
              background-color: var(--background-color); /* Dark Charcoal input background */
               outline: none;
          }
           .coupon-section input[type="text"]:focus {
               border-color: var(--secondary-color); /* Tan focus border */
               box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.3), 0 0 8px rgba(182, 141, 64, 0.6); /* Tan glow */
               outline: none;
           }


          .coupon-section button {
              padding: 8px 15px;
              background-color: var(--button-secondary-bg); /* Use secondary button style (Tan) */
              color: var(--button-secondary-text);
              border: none;
              border-radius: 4px;
              font-weight: 600;
              cursor: pointer;
              transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease;
               outline: none;
          }

          .coupon-section button:hover {
              background-color: var(--button-secondary-hover-bg);
              color: var(--button-secondary-hover-text);
              transform: translateY(-2px); /* Subtle lift */
          }
           .coupon-section button:focus {
               outline: 2px solid var(--primary-color); /* Gold outline */
               outline-offset: 2px;
               border-radius: 4px;
           }


          #couponMessage {
              width: 100%;
              margin-top: 10px;
              font-size: 0.9em;
              text-align: center;
          }

          #couponMessage.success {
              color: #2ecc71; /* Green */
          }

           #couponMessage.error {
               color: var(--color-error-text); /* Alert color */
           }


         /* Styling for Payment Info Section */
         #paymentInfo {
             display: none; /* Hidden by default, shown by JS */
             margin-top: 30px;
             padding-top: 30px;
             border-top: 1px dashed var(--border-color); /* Dark dashed border */
             text-align: center;
         }

         #paymentInfo h3 {
              text-align: center;
             margin-bottom: 20px;
             color: var(--text-color-dark); /* Cream subheading */
             font-size: 1.7em;
         }


          #paymentInfo p {
              font-size: 1.1em;
              margin-bottom: 15px;
              color: var(--text-color-medium); /* Cream text */
          }

          #paymentInfo .upi-details {
              font-size: 1.3em;
              font-weight: 700;
              color: var(--primary-color); /* Gold UPI details */
              margin-bottom: 20px;
              word-break: break-all;
          }

          #paymentInfo img {
              max-width: 250px;
              height: auto;
              margin-bottom: 20px;
              border: 1px solid var(--border-color); /* Dark border */
              padding: 10px;
              background-color: white; /* Keep white background for QR code contrast */
              box-shadow: var(--shadow-light); /* Light shadow */
              border-radius: 4px;
          }


          #paymentInfo .payment-instruction {
              font-size: 1em;
              color: var(--text-color-secondary); /* Tan text */
              margin-top: 15px;
              line-height: 1.6;
          }


         /* Buttons Container */
         .billing-buttons {
             display: flex;
             gap: 20px;
             margin-top: 20px;
         }

         .billing-buttons button,
         .billing-buttons a {
             flex: 1;
             display: block;
             padding: 12px;
             border-radius: 5px;
             font-size: 1.1em;
             font-weight: 700;
             text-align: center;
             cursor: pointer;
             transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease;
             text-decoration: none;
             box-sizing: border-box;
              outline: none; /* Base outline removed, specific buttons add their own */
         }


          .billing-buttons #proceedToPaymentButton,
          .billing-buttons #submitOrderButton {
              background-color: var(--button-primary-bg); /* Primary style (Gold) */
              color: var(--button-primary-text);
          }

          .billing-buttons #proceedToPaymentButton:hover,
          .billing-buttons #submitOrderButton:hover {
              background-color: var(--button-primary-hover-bg);
              color: var(--button-primary-hover-text);
              transform: translateY(-2px); /* Subtle lift */
          }
           .billing-buttons #proceedToPaymentButton:focus,
           .billing-buttons #submitOrderButton:focus {
                outline: 2px solid var(--secondary-color); /* Tan outline */
                outline-offset: 2px;
                border-radius: 5px;
           }


          .billing-buttons .whatsapp-billing-button {
              background-color: var(--whatsapp-green);
              color: white;
              border: none;
          }

          .billing-buttons .whatsapp-billing-button:hover {
              background-color: var(--whatsapp-green-hover);
               transform: translateY(-2px); /* Subtle lift */
          }
           .billing-buttons .whatsapp-billing-button:focus {
               outline: 2px solid var(--secondary-color); /* Tan outline */
               outline-offset: 2px;
               border-radius: 5px;
           }


          .billing-buttons .whatsapp-billing-button i {
              margin-right: 8px;
          }


         /* Responsive adjustment for buttons */
         @media (max-width: 600px) {
              .billing-buttons {
                  flex-direction: column;
                  gap: 10px;
              }
               .coupon-section {
                   flex-direction: column;
                   align-items: stretch;
               }
                .coupon-section label {
                   margin-right: 0;
                   margin-bottom: 5px;
                }
                 .coupon-section input[type="text"] {
                     width: 100%;
                     min-width: auto;
                 }
         }


        /* --- Footer --- */
        .footer {
            background-color: var(--surface-color); /* Lighter Charcoal */
            color: var(--footer-text-color); /* Tan */
            text-align: center;
            padding: 40px 0;
            margin-top: 60px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.6); /* Darker shadow */
            font-size: 0.9em;
             border-top: 1px solid var(--border-color); /* Dark border */
        }


        .social-links {
            margin-top: 0;
            margin-bottom: 20px; /* Added margin */
        }

        .social-links a {
            display: inline-block;
            margin: 0 15px;
            color: var(--primary-color); /* Gold */
            font-size: 32px;
            transition: color 0.3s ease, transform 0.3s ease;
             outline: none; /* Base outline removed */
        }
         .social-links a:focus {
             color: var(--secondary-color); /* Tan on focus */
             outline: 2px solid var(--secondary-color); /* Tan outline */
             outline-offset: 3px;
             border-radius: 50%; /* Match shape */
         }


        .social-links a:hover {
            color: var(--secondary-color); /* Tan on hover */
            transform: scale(1.2); /* Subtle scale */
        }


         /* --- Scroll to Top Button --- */
        .scroll-to-top {
            position: fixed; bottom: 30px; right: 30px; background-color: var(--primary-color); /* Use Gold */
            color: var(--background-color); /* Use Charcoal for text/icon */
            width: 50px; height: 50px; border-radius: 50%; /* Button size */
            text-align: center; line-height: 50px; font-size: 1.5rem; /* Icon size */
            box-shadow: var(--shadow-medium); /* Medium shadow */
            z-index: 900; opacity: 0; visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease, background-color 0.3s ease, transform 0.3s ease;
            cursor: pointer;
            outline: none; /* Base outline removed */
        }
         .scroll-to-top:focus {
             background-color: var(--secondary-color); /* Tan on focus */
             outline: 2px solid var(--secondary-color); /* Tan outline */
             outline-offset: 3px;
             border-radius: 50%;
         }

        .scroll-to-top.visible { opacity: 1; visibility: visible; }
        .scroll-to-top:hover { background-color: var(--secondary-color); transform: scale(1.1); } /* Tan on hover */


        /* --- Responsive Adjustments --- */
        @media (max-width: 1024px) {
             .section h2 {
                 font-size: 2.4em;
             }
              h2::after { width: 60px; }
             .hero {
                 height: 500px;
             }
             .hero .container h1 {
                 font-size: 3em;
             }
             .hero .container p {
                 font-size: 1.2em;
             }
              /* Grids adapt */
             .category-grid,
             .category-products-grid {
                grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
                gap: 25px;
            }
             .product img {
                 height: 250px;
             }
             .product-info {
                 padding: 12px;
             }
             .product-info h3 {
                 font-size: 1.4em;
                  margin-bottom: 6px;
             }
             .product-info p.product-description {
                 font-size: 0.9em;
                 margin-bottom: 12px;
             }
              .product-price {
                 font-size: 1.05em;
                 margin-bottom: 12px;
             }
              .add-to-cart-button, .whatsapp-button {
                 font-size: 0.95em;
                 padding: 8px;
             }
             .whatsapp-button {
                 margin-top: 8px;
             }
             .section {
                 padding: 80px 0;
             }
             .category-products-container h3 {
                 font-size: 1.8em;
             }
             .cart-modal-content {
                 padding: 20px;
             }
              #cartItemsList li {
                 font-size: 1em;
                 padding: 10px 0;
             }
              .remove-item {
                 padding: 3px 8px;
                 font-size: 0.85em;
             }
              .cart-total {
                 font-size: 1.2em;
             }
              #billingSection h2 {
                 font-size: 2em;
             }
              #billingSection h2::after { width: 50px; }
             #orderSummaryReview h3 {
                 font-size: 1.3em;
             }
              #orderSummaryReview li {
                  font-size: 0.95em;
              }
               .total-line span,
               .discount-line span,
               .final-total-line span {
                   min-width: 80px;
               }
               .social-links a {
                   font-size: 28px;
                   margin: 0 12px;
               }
                .scroll-to-top {
                   width: 45px; height: 45px; line-height: 45px; font-size: 1.4rem;
                }

         }

        @media (max-width: 768px) {
             .section {
                 padding: 60px 0;
             }
            .section h2 {
                font-size: 2em;
            }
             h2::after { width: 50px; }
             .hero {
                 height: 400px;
             }
             .hero .container h1 {
                 font-size: 2.5em;
             }
             .hero .container p {
                 font-size: 1.1em;
             }
             .hero-cta-button {
                 padding: 12px 25px;
                 font-size: 1.1em;
             }
             .about-contact .container {
                 flex-direction: column;
                 gap: 30px;
             }
             .about-contact h2, .about-content h3, .contact-info h3 {
                 text-align: center;
             }
             .about-content h3::after, .contact-info h3::after { /* Add underline to stacked subheadings */
                  content: ''; position: absolute; bottom: 0; left: 50%;
                  transform: translateX(-50%); height: 2px; width: 40px;
                  background: var(--primary-color);
                  border-radius: 1px;
             }


             .about-contact p, .about-contact address, .contact-info p {
                 font-size: 1em;
             }
              /* Grids adapt */
             .category-grid,
             .category-products-grid {
                grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
                gap: 20px;
            }
             .product img {
                 height: 180px;
             }
             .product-info {
                 padding: 10px;
             }
             .product-info h3 {
                 font-size: 1.3em;
                  margin-bottom: 5px;
             }
             .product-info p.product-description {
                 font-size: 0.85em;
                 margin-bottom: 10px;
             }
             .product-price {
                 font-size: 1em;
                 margin-bottom: 10px;
             }
             .add-to-cart-button, .whatsapp-button {
                font-size: 0.95em;
                padding: 8px;
             }
            .whatsapp-button {
                 margin-top: 8px;
            }
             .social-links a {
                font-size: 26px;
                margin: 0 10px;
            }
             .footer {
                padding: 30px 0;
             }
             .category-products-container h3 {
                 font-size: 1.6em;
             }
             .cart-modal-content {
                 padding: 20px;
             }
              #cartItemsList li {
                 font-size: 1em;
                 padding: 10px 0;
             }
              .remove-item {
                 padding: 3px 8px;
                 font-size: 0.85em;
             }
              .cart-total {
                 font-size: 1.2em;
             }
              #billingSection h2 {
                 font-size: 1.8em;
             }
              #billingSection h2::after { width: 40px; }
              #orderSummaryReview h3 {
                  font-size: 1.2em;
              }
               #orderSummaryReview h3::after { width: 30px; }
              #orderSummaryReview li {
                  font-size: 0.9em;
              }
               .total-line span,
               .discount-line span,
               .final-total-line span {
                   min-width: 70px;
               }
               #billingForm input, #billingForm textarea {
                  padding: 8px;
                  margin-bottom: 15px;
               }
               #billingForm label {
                  margin-bottom: 5px;
               }
                .scroll-to-top {
                   width: 40px; height: 40px; line-height: 40px; font-size: 1.3rem;
                   bottom: 15px; right: 15px;
                }
         }

         @media (max-width: 480px) {
              .section {
                 padding: 40px 0;
             }
             .section h2 {
                 font-size: 1.8em;
             }
              h2::after { width: 40px; }
             .hero {
                 height: 350px;
             }
             .hero .container h1 {
                 font-size: 2em;
             }
             .hero .container p {
                 font-size: 0.95em;
             }
             .hero-cta-button {
                 padding: 10px 20px;
                 font-size: 1em;
             }
             .about-contact .container {
                gap: 20px;
             }
              .about-contact h3::after, .contact-info h3::after { width: 30px; }
             .about-contact p, .about-contact address, .contact-info p {
                 font-size: 0.95em;
             }
              /* Grids stack to 1 column on smallest screens */
             .category-grid,
             .category-products-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
             .product img {
                height: 160px;
            }
             .product-info {
                 padding: 8px;
             }
             .product-info h3 {
                 font-size: 1.2em;
                 margin-bottom: 4px;
             }
             .product-info p.product-description {
                 font-size: 0.8em;
                 margin-bottom: 8px;
             }
             .product-price {
                 font-size: 0.95em;
                 margin-bottom: 8px;
             }
             .add-to-cart-button, .whatsapp-button {
                font-size: 0.9em;
                padding: 6px;
             }
            .whatsapp-button {
                 margin-top: 6px;
            }
             .social-links a {
                font-size: 24px;
                margin: 0 6px;
            }
             .footer {
                padding: 25px 0;
             }
             .category-products-container h3 {
                 font-size: 1.4em;
             }
              .cart-modal-content {
                 padding: 15px;
             }
              #cartItemsList li {
                 font-size: 0.95em;
                 padding: 8px 0;
             }
              .remove-item {
                 padding: 2px 6px;
                 font-size: 0.8em;
             }
              .cart-total {
                 font-size: 1.1em;
             }
              .checkout-button {
                font-size: 1em;
                padding: 10px;
              }
               .total-line span,
               .discount-line span,
               .final-total-line span {
                   min-width: 50px;
               }
         }
          /* Accessibility: Highlighting interactive elements on focus */
          /* Apply a consistent dashed outline to most interactive elements */
         a:focus,
         button:focus,
         input:focus,
         textarea:focus,
         select:focus,
         [tabindex]:focus {
             outline: 2px dashed var(--primary-color); /* Gold dashed outline */
             outline-offset: 3px;
             border-radius: 3px; /* Basic border-radius, specific elements override this */
         }

          /* Override for elements with custom focus styles defined above */
          /* This prevents the generic dashed outline from overwriting specific styles */
         .nav a:focus,
         .cart-icon-container:focus,
         .hero-cta-button:focus,
         .product img:focus,
         .add-to-cart-button:focus,
         .whatsapp-button:focus,
         .search-container input:focus,
         .back-to-categories:focus,
         .back-to-cart:focus,
         .back-to-billing:focus,
         #imageModal span:focus,
         .cart-modal-content .close:focus,
         .remove-item:focus,
         .checkout-button:focus,
         #billingForm input[type="text"]:focus,
         #billingForm input[type="email"]:focus,
         #billingForm input[type="tel"]:focus,
         #billingForm textarea:focus,
         .coupon-section input[type="text"]:focus,
         .coupon-section button:focus,
         .billing-buttons #proceedToPaymentButton:focus,
         .billing-buttons #submitOrderButton:focus,
         .billing-buttons .whatsapp-billing-button:focus,
         .social-links a:focus,
         .scroll-to-top:focus {
             outline: none; /* Remove default outline */
             /* Custom focus styles are defined above for these specific elements */
         }

    </style>
</head>
<body>

    <header class="header">
        <div class="container">
            <img src="GridArt_20250516_180656516.png" alt="J.K Gems Logo">
            <nav class="nav">
                <ul>
                    <li><a href="#about">About & Visit Us</a></li>
                    <li><a href="#products">Categories</a></li>
                </ul>
                <div class="cart-icon-container" id="cartIcon" role="button" tabindex="0" aria-label="Shopping Cart">
                     <i class="fas fa-shopping-cart"></i>
                     <span class="cart-count" id="cartCount">0</span>
                 </div>
            </nav>
        </div>
    </header>

    <section class="hero">
        <div class="hero-background-animation"></div> <div class="hero-content"> <div class="container">
                <h1>Exquisite Gemstones & Spiritual Treasures</h1>
                <p>Discover the perfect blend of beauty, authenticity, and spiritual energy at J.K Gems.</p>
                <a href="#products" class="hero-cta-button">Explore Categories</a>
            </div>
        </div>
    </section>

    <section id="about" class="section about-contact">
        <div class="container">
            <h2>About J.K Gems & Visit Us</h2>
            <div class="about-content">
                <h3>Our Story</h3>
                <p>J.K Gems is a well-known and trusted firm, serving customers with exquisite gemstones and spiritual products since 1965. Founded on principles of quality, authenticity, and integrity, we have built a reputation as a cornerstone in Junagadh's Soni Bajar.</p>
                <p>For generations, we have been dedicated to sourcing the finest gemstones and authentic spiritual items, offering expert guidance and personalized service to our valued customers. Our legacy is built on trust, and our commitment to providing genuine products remains unwavering.</p>
            </div>

            <div class="contact-info">
                 <h3>Contact & Location</h3>
                 <p><i class="fas fa-map-marker-alt"></i> Jk gems<br>Balakrishna market, Haveli gali<br>Soni bajar, Junagadh<br>Gujarat 362001</p>
                 <p><i class="fas fa-phone"></i> +91 9723197899</p>
                 <p><i class="far fa-clock"></i> Business Hours: 10 am to 3 pm and 4 pm to 9 pm</p>
                 <p>You can also inquire directly via WhatsApp using the buttons on our product listings below.</p>
            </div>
        </div>
    </section>

    <section id="products" class="section products">
        <div class="container">
             <h2 id="products-heading">Our Categories</h2>
             <div class="search-container">
                 <input type="text" id="searchInput" onkeyup="searchItems()" placeholder="Search Categories or Products...">
             </div>

            <div class="category-grid" id="categoryGrid">
                <div class="product category-card" data-category-target="gemstones" role="button" tabindex="0">
                    <img src="IMG-20250516-WA0015.jpg" alt="Gem stones Category">
                    <div class="product-info">
                        <h3>Gemstones</h3>
                        <p class="product-description">Explore our collection of authentic, high-quality gemstones.</p>
                    </div>
                </div>

                <div class="product category-card" data-category-target="rudraksh" role="button" tabindex="0">
                    <img src="IMG-20250516-WA0003.jpg" alt="Rudraksh Category">
                     <div class="product-info">
                        <h3>Rudraksh</h3>
                        <p class="product-description">Discover genuine Rudraksha beads and items for spiritual well-being.</p>
                    </div>
                </div>

                <div class="product category-card" data-category-target="yantra" role="button" tabindex="0">
                    <img src="IMG-20250516-WA0001.jpg" alt="Yantra Category">
                     <div class="product-info">
                        <h3>Yantra & Spiritual Items</h3>
                        <p class="product-description">Sacred geometric diagrams, Sphatik items, and other spiritual treasures.</p>
                    </div>
                </div>

                 </div>
            <div id="gemstones-products-container" class="category-products-container">
                 <a href="#products" class="back-to-categories" role="button" tabindex="0"><i class="fas fa-arrow-left"></i> Back to Categories</a>
                 <h3>Gemstones Collection</h3>
                 <div class="category-products-grid">
                     <div class="product">
                         <img src="path/to/your_gemstone_image_1.jpg" alt="Example Gemstone 1" tabindex="0"> <div class="product-info">
                             <h3>Example Gemstone 1</h3>
                             <p class="product-description">Brief description of Example Gemstone 1.</p>
                             <p class="product-price">5500.00</p> <button class="add-to-cart-button"
                                     data-product-id="gemstone_ex1"
                                     data-product-name="Example Gemstone 1"
                                     data-product-price="5500"> Add to Cart
                             </button>
                              <a href="https://wa.me/919723197899?text=Hello,%20I'm%20interested%20in%20Example%20Gemstone%201.%20Could%20you%20provide%20more%20details%20and%20pricing?" class="whatsapp-button" target="_blank" aria-label="Inquire about Example Gemstone 1 on WhatsApp"> <i class="fab fa-whatsapp"></i> Inquire Now</a>
                         </div>
                     </div>
                     <div class="product">
                         <img src="IMG-20250516-WA0011.jpg" alt="Gemstone Rings" tabindex="0"> <div class="product-info">
                             <h3>Gemstone Rings</h3>
                             <p class="product-description">Beautiful rings featuring authentic gemstones for style and astrological benefits.</p>
                             <p class="product-price">999.00</p> <button class="add-to-cart-button"
                                     data-product-id="gemstone_rings_main"
                                     data-product-name="Gemstone Rings"
                                     data-product-price="999"> Add to Cart
                             </button>
                              <a href="https://wa.me/919723197899?text=Hello,%20I'm%20interested%20in%20Gemstone%20Rings.%20Could%20you%20provide%20more%20details%20and%20pricing?" class="whatsapp-button" target="_blank" aria-label="Inquire about Gemstone Rings on WhatsApp"> <i class="fab fa-whatsapp"></i> Inquire Now</a>
                         </div>
                     </div>
                      </div>
            </div>

            <div id="rudraksh-products-container" class="category-products-container">
                <a href="#products" class="back-to-categories" role="button" tabindex="0"><i class="fas fa-arrow-left"></i> Back to Categories</a>
                <h3>Rudraksh Items</h3>
                <div class="category-products-grid">
                     <div class="product">
                         <img src="IMG-20250516-WA0003.jpg" alt="Rudraksh Mala" tabindex="0"> <div class="product-info">
                             <h3>Rudraksh Mala</h3>
                             <p class="product-description">Genuine Rudraksha beads for spiritual connection and well-being.</p>
                             <p class="product-price">599.00</p> <button class="add-to-cart-button"
                                     data-product-id="rudraksh_mala_main"
                                     data-product-name="Rudraksh Mala" data-product-price="599"> Add to Cart
                             </button>
                              <a href="https://wa.me/919723197899?text=Hello,%20I'm%20interested%20in%20Rudraksh%20Mala.%20Could%20you%20provide%20more%20details%20and%20pricing?" class="whatsapp-button" target="_blank" aria-label="Inquire about Rudraksh Mala on WhatsApp"> <i class="fab fa-whatsapp"></i> Inquire Now</a>
                         </div>
                     </div>
                     <div class="product">
                         <img src="IMG-20250516-WA0016.jpg" alt="Rudraksh Bracelet" tabindex="0"> <div class="product-info">
                             <h3>Rudraksh Bracelet</h3>
                             <p class="product-description">Wear the spiritual energy with authentic Rudraksh bracelets.</p>
                             <p class="product-price">5999.00</p> <button class="add-to-cart-button"
                                     data-product-id="rudraksh_bracelet_main"
                                     data-product-name="Rudraksh Bracelet"
                                     data-product-price="5999"> Add to Cart
                             </button>
                              <a href="https://wa.me/919723197899?text=Hello,%20I'm%20interested%20in%20Rudraksh%20Bracelet.%20Could%20you%20provide%20more%20details%20and%20pricing?" class="whatsapp-button" target="_blank" aria-label="Inquire about Rudraksh Bracelet on WhatsApp"> <i class="fab fa-whatsapp"></i> Inquire Now</a>
                         </div>
                     </div>
                      </div>
            </div>

             <div id="yantra-products-container" class="category-products-container">
                <a href="#products" class="back-to-categories" role="button" tabindex="0"><i class="fas fa-arrow-left"></i> Back to Categories</a>
                <h3>Yantra & Spiritual Collection</h3>
                <div class="category-products-grid">
                     <div class="product">
                         <img src="IMG-20250516-WA0001.jpg" alt="Yantra" tabindex="0"> <div class="product-info">
                             <h3>Yantra</h3>
                             <p class="product-description">Sacred geometric diagrams for meditation and energy focusing.</p>
                             <p class="product-price">999.00</p> <button class="add-to-cart-button"
                                     data-product-id="yantra_main"
                                     data-product-name="Yantra"
                                     data-product-price="999"> Add to Cart
                             </button>
                              <a href="https://wa.me/919723197899?text=Hello,%20I'm%20interested%20in%20Yantra.%20Could%20you%20provide%20more%20details%20and%20pricing?" class="whatsapp-button" target="_blank" aria-label="Inquire about Yantra on WhatsApp"> <i class="fab fa-whatsapp"></i> Inquire Now</a>
                         </div>
                     </div>
                      <div class="product">
                         <img src="61Fg6DsA4iL._AC_UF894,1000_QL80_.jpg" alt="Sphatik Shree Yantra" tabindex="0"> <div class="product-info">
                             <h3>Sphatik Shree Yantra</h3>
                             <p class="product-description">Clear quartz Shree Yantra for purity, prosperity, and positive energy.</p>
                              <p class="product-price">999.00</p> <button class="add-to-cart-button"
                                     data-product-id="sphatik_yantra_main"
                                     data-product-name="Sphatik Shree Yantra"
                                     data-product-price="999"> Add to Cart
                             </button>
                             <a href="https://wa.me/919723197899?text=Hello,%20I'm%20interested%20in%20Sphatik%20Shree%20Yantra.%20Could%20you%20provide%20more%20details%20and%20pricing?" class="whatsapp-button" target="_blank" aria-label="Inquire about Sphatik Shree Yantra on WhatsApp"> <i class="fab fa-whatsapp"></i> Inquire Now</a>
                         </div>
                     </div>
                      </div>
            </div>
            </div>
    </section>

    <div id="cartModal">
        <div class="cart-modal-content">
            <span class="close" id="closeCartModal" role="button" tabindex="0" aria-label="Close Cart"></span>
            <h2>Your Cart</h2>
            <div id="emptyCartMessage">Your cart is empty.</div>
            <ul id="cartItemsList">
                </ul>
            <div class="cart-total" id="cartTotal"></div>
            <button class="checkout-button" id="checkoutButton">Proceed to Inquiry</button>
        </div>
    </div>

    <section id="billingSection" class="section">
         <div class="container">
             <a href="#" class="back-to-cart" role="button" tabindex="0"><i class="fas fa-arrow-left"></i> Back to Cart</a>
             <h2>Order Inquiry & Payment</h2>

             <div id="orderSummaryReview">
                 <h3>Order Summary</h3>
                 <ul id="reviewItemsList">
                     </ul>
                 <div class="total-line">Subtotal: <span id="reviewSubtotal"></span></div>
                  <div class="discount-line" id="reviewDiscountLine" style="display: none;">Discount: <span id="reviewDiscount"></span></div>
                  <div class="final-total-line">Total: <span id="reviewFinalTotal"></span></div>

             </div>

             <div class="coupon-section" id="couponSection">
                 <label for="couponCode">Coupon Code:</label>
                 <input type="text" id="couponCode" placeholder="Enter coupon code">
                 <button type="button" id="applyCouponButton">Apply Coupon</button>
                 <div id="couponMessage"></div>
             </div>

             <form id="billingForm" action="https://formsubmit.co/Gauravraningagoldjewellery@gmail.com" method="POST">
                 <input type="hidden" name="_subject" id="emailSubject" value="J.K Gems Website Order Inquiry">
                 <input type="hidden" name="_template" value="box">
                 <input type="hidden" name="_next" value="YOUR_THANK_YOU_PAGE_URL_HERE"> <input type="text" name="_honeypot" style="display:none">


                 <div id="billingInputs">
                      <label for="customer_name">Full Name:</label>
                      <input type="text" id="customer_name" name="Name" required pattern="[A-Za-z---\s'-]+" title="Enter your full name (letters, spaces, hyphens, or apostrophes only)">

                     <label for="customer_email">Email (Optional):</label>
                     <input type="email" id="customer_email" name="Email">

                     <label for="customer_phone">Phone/WhatsApp Number:</label>
                     <input type="tel" id="customer_phone" name="Phone" required pattern="[\d\s\-\(\)+]+" title="Enter a valid phone number (digits, spaces, hyphens, parentheses, or plus sign allowed)">

                     <label for="customer_address">Shipping Address:</label>
                     <textarea id="customer_address" name="Address" rows="4" required></textarea>
                 </div>


                 <input type="hidden" name="Order Details" id="orderCartDetails">
                 <input type="hidden" name="_parsed_order_details" id="_parsedOrderDetails">
                 <input type="hidden" name="Discount Applied" id="discountApplied">
                 <input type="hidden" name="Final Total" id="finalOrderTotal">
                 <input type="hidden" name="UPI ID Shown" value="gauravraninga23@okhdfcbank">
                 <input type="hidden" name="Payment Instruction Shown" value="Please complete the payment via UPI using the details provided. Your order is confirmed only after payment is received. You will receive a confirmation email once payment is verified.">


                 <div id="paymentInfo">
                     <h3>Complete Your Payment via UPI</h3>
                     <p>Please transfer the total amount to the UPI ID below:</p>
                     <div class="upi-details">gauravraninga23@okhdfcbank</div>
                     <p>Scan the QR code to pay:</p>
                     <img src="IMG-20250517-WA0001.jpg" alt="UPI QR Code for Payment">
                     <p class="payment-instruction">
                         <strong>Important:</strong> Your order inquiry has been received. Your order will be confirmed only *after* the payment is successfully received. Please complete the UPI payment now. You will receive a confirmation email once your payment is verified.
                     </p>
                 </div>

                 <div class="billing-buttons">
                      <button type="button" id="proceedToPaymentButton">Proceed to Payment</button>
                      <button type="submit" id="submitOrderButton" style="display: none;">Submit Inquiry / Payment Made</button>
                 </div>
                 <a href="https://wa.me/919723197899?text=Hello,%20I have a general query regarding my order inquiry." class="whatsapp-billing-button" target="_blank" aria-label="WhatsApp Query"><i class="fab fa-whatsapp"></i> WhatsApp Query</a>

             </form>
         </div>
    </section>

    <footer class="footer">
        <div class="container">
            <div class="social-links">
                <a href="https://www.instagram.com/j_k_gems" target="_blank" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="https://www.facebook.com/YOUR_FACEBOOK_PAGE_ID" target="_blank" aria-label="Facebook"><i class="fab fa-facebook"></i></a> <a href="https://youtube.com/@jkgems-td3et?si=Ne4JWKic5aeZfBTa" target="_blank" aria-label="YouTube"><i class="fab fa-youtube"></i></a> </div>
             <p> 2025 J.K Gems. All rights reserved.</p>
        </div>
    </footer>

    <div id="imageModal">
        <span class="close" role="button" tabindex="0" aria-label="Close image modal"></span>
        <img src="" id="modalImage" alt="Enlarged product image">
    </div>

     <a href="#" class="scroll-to-top" aria-label="Scroll to top"><i class="fas fa-arrow-up"></i></a>


    <script>
        // --- Theme Switching Functionality - REMOVED as theme is now permanent ---

        // --- Category/Product View Switching ---
        const categoryGrid = document.getElementById('categoryGrid');
        const productContainers = document.querySelectorAll('.category-products-container');
        const productsHeading = document.getElementById('products-heading');
        const searchInput = document.getElementById('searchInput');
        // categoryCards variable is no longer needed globally if using delegation
        const backButtons = document.querySelectorAll('.back-to-categories'); // Keep these for event listeners
        const billingSection = document.getElementById('billingSection');
        const billingInputs = document.getElementById('billingInputs');
        const paymentInfoDiv = document.getElementById('paymentInfo');
        const proceedToPaymentButton = document.getElementById('proceedToPaymentButton');
        const submitOrderButton = document.getElementById('submitOrderButton');
        const backToCartButton = document.querySelector('.back-to-cart'); // Select specifically


        // Function to show only the category grid
        function showCategoryGrid() {
            productsHeading.textContent = 'Our Categories';
            searchInput.placeholder = 'Search Categories...';
            searchInput.style.display = 'block';
            categoryGrid.style.display = 'grid'; // Show the category grid
            productContainers.forEach(container => {
                container.style.display = 'none'; // Hide all product containers
            });
            billingSection.style.display = 'none'; // Hide billing section

            // Reset billing section state when going back from billing/payment
            billingInputs.style.display = 'block'; // Show form inputs
            paymentInfoDiv.style.display = 'none'; // Hide payment info
            proceedToPaymentButton.style.display = 'block'; // Show proceed button
            submitOrderButton.style.display = 'none'; // Hide submit button
            submitOrderButton.textContent = 'Submit Inquiry / Payment Made'; // Restore button text
            submitOrderButton.disabled = false;


            // Set search to work on categories
            searchItems = searchCategories; // Update the global searchItems function reference
            searchInput.onkeyup = searchItems;
            searchInput.value = ''; // Clear search input
            searchItems(); // Apply search filter (will show all categories initially)

            // Smooth scroll to the top of the products section
            document.getElementById('products').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Function to show a specific product container
        function showProductContainer(categoryId) {
             const containerId = categoryId + '-products-container';
             const containerToShow = document.getElementById(containerId);

             if (!containerToShow) {
                 console.error("Product container not found for category:", categoryId);
                 showCategoryGrid(); // Fallback to category grid
                 return;
             }
             const categoryName = categoryId.charAt(0).toUpperCase() + categoryId.slice(1);
             productsHeading.textContent = `${categoryName} Collection`; // Update heading
             searchInput.placeholder = `Search ${categoryName} products...`; // Update search placeholder
             searchInput.style.display = 'block';

             categoryGrid.style.display = 'none'; // Hide the category grid
             productContainers.forEach(container => {
                 container.style.display = 'none'; // Hide all product containers
             });
             billingSection.style.display = 'none'; // Hide billing section

              // Reset billing section state when navigating away
            billingInputs.style.display = 'block';
            paymentInfoDiv.style.display = 'none';
            proceedToPaymentButton.style.display = 'block';
            submitOrderButton.style.display = 'none';
            submitOrderButton.textContent = 'Submit Inquiry / Payment Made';
            submitOrderButton.disabled = false;


             containerToShow.style.display = 'block'; // Show the selected product container


             // Set search to work on products within this category
             searchItems = searchProductsInCategory; // Update the global searchItems function reference
             searchInput.onkeyup = searchItems;
             searchInput.value = ''; // Clear search input
             searchItems(); // Apply search filter

             // Smooth scroll to the top of the products section
             document.getElementById('products').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

         // Function to show the billing section (initial state with form inputs)
         function showBillingSection() {
             if (cart.length === 0) {
                 alert("Your cart is empty. Please add items before proceeding.");
                 cartModal.style.display = 'none'; // Close cart modal
                 return; // Prevent showing billing if cart is empty
             }

             productsHeading.textContent = 'Order Inquiry & Payment'; // Update heading
             searchInput.style.display = 'none'; // Hide search bar on billing page

             categoryGrid.style.display = 'none'; // Hide categories
             productContainers.forEach(container => {
                 container.style.display = 'none'; // Hide products
             });
             cartModal.style.display = 'none'; // Hide cart modal

             billingSection.style.display = 'block'; // Show billing section

             // Ensure initial state is billing form inputs visible, payment info hidden
             billingInputs.style.display = 'block'; // Show form inputs
             paymentInfoDiv.style.display = 'none'; // Hide payment info
             proceedToPaymentButton.style.display = 'block'; // Show proceed button
             submitOrderButton.style.display = 'none'; // Hide submit button
             submitOrderButton.textContent = 'Submit Inquiry / Payment Made';
             submitOrderButton.disabled = false;


             resetCoupon(); // Reset coupon state when showing billing
             renderOrderSummaryReview(); // Populate the review section

             // Smooth scroll to the top of the billing section
             billingSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
         }

          // Function to show the payment information and hide billing inputs
          function showPaymentInfo() {
              // Validate required fields before proceeding using the form's built-in validation
              const billingForm = document.getElementById('billingForm');
              if (!billingForm.checkValidity()) {
                  billingForm.reportValidity(); // Trigger browser's default validation
                  // Scroll to the first invalid element for better UX (optional)
                  const firstInvalidElement = billingForm.querySelector(':invalid');
                  if (firstInvalidElement) {
                       firstInvalidElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                       firstInvalidElement.focus();
                  }
                  return false; // Prevent moving forward
              }


              billingInputs.style.display = 'none'; // Hide billing form inputs
              paymentInfoDiv.style.display = 'block'; // Show payment info
              proceedToPaymentButton.style.display = 'none'; // Hide proceed button
              submitOrderButton.style.display = 'block'; // Show submit button

              // Update the email subject now that we are at the payment step
              document.getElementById('emailSubject').value = `J.K Gems Order Inquiry - Payment Details Shown`;


              return true; // Indicate success
          }


         // Function to hide the billing section and show the cart modal
         function hideBillingSection() {
             billingSection.style.display = 'none'; // Hide billing section
             cartModal.style.display = 'flex'; // Show cart modal again
             productsHeading.textContent = 'Your Cart'; // Change heading temporarily
             searchInput.style.display = 'none'; // Keep search hidden in modal

             // Reset billing section state when going back to cart
             billingInputs.style.display = 'block'; // Show form inputs
             paymentInfoDiv.style.display = 'none'; // Hide payment info
             proceedToPaymentButton.style.display = 'block'; // Show proceed button
             submitOrderButton.style.display = 'none'; // Hide submit button
             submitOrderButton.textContent = 'Submit Inquiry / Payment Made';
             submitOrderButton.disabled = false;

             // Smooth scroll back to the top of the products section (which now shows categories/cart context)
              document.getElementById('products').scrollIntoView({ behavior: 'smooth', block: 'start' });
         }


        // --- Updated Search Functionality ---
        // Search only categories when the category grid is visible
        function searchCategories() {
             const input = document.getElementById('searchInput');
             const filter = input.value.toUpperCase();
             // Get only the category cards within the visible category grid
             const categories = categoryGrid.querySelectorAll('.product.category-card');

             categories.forEach(category => {
                 // Search text in heading and description
                 const h3 = category.querySelector('h3');
                 const description = category.querySelector('.product-description');
                 const textValue = (h3 ? h3.textContent || h3.innerText : '') + ' ' + (description ? description.textContent || description.innerText : '');
                 if (textValue.toUpperCase().indexOf(filter) > -1) {
                     category.style.display = ""; // Show
                 } else {
                     category.style.display = "none"; // Hide
                 }
             });
        }

        // Search only products within the currently visible category container
        function searchProductsInCategory() {
            const input = document.getElementById('searchInput');
            const filter = input.value.toUpperCase();
            // Get the currently visible category products grid
            const visibleProductGrid = document.querySelector('.category-products-container[style*="display: block"] .category-products-grid');

            if (!visibleProductGrid) {
                 console.warn("No visible product grid found for search.");
                 return;
            }

            const products = visibleProductGrid.querySelectorAll('.product');

            products.forEach(product => {
                 // Search text in heading, description, and price
                 const h3 = product.querySelector('h3');
                 const description = product.querySelector('.product-description');
                 const priceElement = product.querySelector('.product-price');
                 const textValue = (h3 ? h3.textContent || h3.innerText : '') + ' ' +
                                   (description ? description.textContent || description.innerText : '') + ' ' +
                                   (priceElement ? priceElement.textContent || priceElement.innerText : '');


                if (textValue.toUpperCase().indexOf(filter) > -1) {
                    product.style.display = "";
                } else {
                    product.style.display = "none";
                }
            });
        }

        // The search function used by the input's onkeyup will be set dynamically
        let searchItems = searchCategories; // Initial function set on load


        // --- Image Modal Functionality ---
        const modal = document.getElementById('imageModal');
        const modalImg = document.getElementById('modalImage');
        const closeBtn = modal.querySelector('.close');

        // Add click listener to the modal close button
        closeBtn.addEventListener('click', function() {
            modal.style.display = 'none'; // Hide modal
        });
        // Add keydown listener for accessibility (Space or Enter)
        closeBtn.addEventListener('keydown', function(e) {
             if (e.key === ' ' || e.key === 'Enter') {
                  e.preventDefault(); // Prevent default spacebar action or form submission
                  modal.style.display = 'none'; // Hide modal
             }
        });


        // Add click listener to the modal background to close
        modal.addEventListener('click', function(e) {
            if (e.target === modal) { // Close only if clicking directly on the modal background
                modal.style.display = 'none';
            }
        });

        // Optional: Close with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && modal.style.display === 'flex') {
                modal.style.display = 'none';
            }
        });


        // --- Add to Cart & Billing/Payment Functionality ---
        const cartIcon = document.getElementById('cartIcon');
        const cartCountSpan = document.getElementById('cartCount');
        const cartModal = document.getElementById('cartModal');
        const closeCartModalBtn = document.getElementById('closeCartModal');
        const cartItemsList = document.getElementById('cartItemsList');
        const cartTotalDiv = document.getElementById('cartTotal');
        const checkoutButton = document.getElementById('checkoutButton');
        const emptyCartMessage = document.getElementById('emptyCartMessage');

        const reviewItemsList = document.getElementById('reviewItemsList');
        const reviewSubtotalSpan = document.getElementById('reviewSubtotal');
        const reviewDiscountLine = document.getElementById('reviewDiscountLine');
        const reviewDiscountSpan = document.getElementById('reviewDiscount');
        const reviewFinalTotalSpan = document.getElementById('reviewFinalTotal');
        const orderCartDetailsInput = document.getElementById('orderCartDetails');
        const parsedOrderDetailsInput = document.getElementById('_parsedOrderDetails');
        const discountAppliedInput = document.getElementById('discountApplied');
        const finalOrderTotalInput = document.getElementById('finalOrderTotal');

        const couponCodeInput = document.getElementById('couponCode');
        const applyCouponButton = document.getElementById('applyCouponButton');
        const couponMessageDiv = document.getElementById('couponMessage');
        // couponSectionDiv is no longer needed globally


        // Load cart from localStorage or initialize empty array
        let cart = JSON.parse(localStorage.getItem('jk-gems-cart')) || [];

        // Variables for coupon and total
        let currentSubtotal = 0;
        let discountPercentage = 0;
        let isCouponApplied = false;


        // Function to save cart to localStorage
        function saveCart() {
            localStorage.setItem('jk-gems-cart', JSON.stringify(cart));
        }

        // Function to update cart UI (count and list)
        function updateCartUI() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCountSpan.textContent = totalItems;

            // Hide count if 0
            cartCountSpan.style.display = totalItems > 0 ? 'block' : 'none';

            // Render cart content only when modal is open or about to open
             if (cartModal.style.display === 'flex') {
                 renderCart();
             }
        }

        // Function to add item to cart
        function addToCart(product) {
            const existingItemIndex = cart.findIndex(item => item.id === product.id);

            if (existingItemIndex > -1) {
                // Item already in cart, increase quantity
                cart[existingItemIndex].quantity++;
            } else {
                // Item not in cart, add it
                cart.push({...product, quantity: 1});
            }

            saveCart();
            updateCartUI();
             console.log(`${product.name} added to cart!`);
        }

        // Function to remove item from cart
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            saveCart();
            updateCartUI();
        }

        // Function to render cart items in the modal
        function renderCart() {
            cartItemsList.innerHTML = ''; // Clear current list
            let total = 0;

            if (cart.length === 0) {
                emptyCartMessage.style.display = 'block';
                cartTotalDiv.style.display = 'none';
                checkoutButton.style.display = 'none';
            } else {
                emptyCartMessage.style.display = 'none';
                cartTotalDiv.style.display = 'block';
                checkoutButton.style.display = 'block';

                cart.forEach(item => {
                    const listItem = document.createElement('li');
                    const itemTotal = item.price * item.quantity;
                    listItem.innerHTML = `
                        <div class="item-details">
                            <span class="item-name">${item.name}</span>
                            <span class="item-quantity"> (x${item.quantity})</span>
                            <br>
                            <span class="item-price">${itemTotal.toFixed(2)}</span>
                        </div>
                        <button class="remove-item" data-product-id="${item.id}" aria-label="Remove ${item.name} from cart" tabindex="0">Remove</button>
                    `;
                    cartItemsList.appendChild(listItem);
                    total += item.price * item.quantity;
                });

                cartTotalDiv.textContent = `Total: ${total.toFixed(2)}`;
            }
        }

         // Function to render order summary in the billing section
         function renderOrderSummaryReview() {
             reviewItemsList.innerHTML = '';
             currentSubtotal = 0;

             if (cart.length === 0) {
                 reviewItemsList.innerHTML = '<li>Cart is empty.</li>';
                 reviewSubtotalSpan.textContent = '0.00';
                 reviewDiscountLine.style.display = 'none';
                 reviewDiscountSpan.textContent = '';
                 reviewFinalTotalSpan.textContent = '0.00';
             } else {
                 cart.forEach(item => {
                     const listItem = document.createElement('li');
                     const itemTotal = item.price * item.quantity;
                     listItem.innerHTML = `
                         <span class="item-name">${item.name} (x${item.quantity})</span>
                         <span class="item-price">${itemTotal.toFixed(2)}</span>
                     `;
                     reviewItemsList.appendChild(listItem);
                     currentSubtotal += itemTotal;
                 });

                 reviewSubtotalSpan.textContent = `${currentSubtotal.toFixed(2)}`;

                 let finalTotal = currentSubtotal;
                 let discountAmount = 0;

                 if (isCouponApplied && discountPercentage > 0) {
                     discountAmount = currentSubtotal * (discountPercentage / 100);
                     finalTotal = currentSubtotal - discountAmount;
                     reviewDiscountSpan.textContent = `- ${discountAmount.toFixed(2)}`;
                     reviewDiscountLine.style.display = 'block';
                 } else {
                     reviewDiscountLine.style.display = 'none';
                     reviewDiscountSpan.textContent = '';
                 }

                 reviewFinalTotalSpan.textContent = `${finalTotal.toFixed(2)}`;

                 // Populate the hidden form fields
                 const orderDetailsText = cart.map(item =>
                     `${item.name} (Qty: ${item.quantity}) - ${(item.price * item.quantity).toFixed(2)}`
                 ).join('\n');

                 let fullOrderDetails = `Order Items:\n${orderDetailsText}\n\nSubtotal: ${currentSubtotal.toFixed(2)}`;

                 if (isCouponApplied && discountPercentage > 0) {
                     fullOrderDetails += `\nDiscount (${discountPercentage}%): -${discountAmount.toFixed(2)}`;
                 }
                 fullOrderDetails += `\nFinal Total: ${finalTotal.toFixed(2)}`;


                 orderCartDetailsInput.value = fullOrderDetails;

                 const parsedDetails = {
                     items: cart,
                     subtotal: currentSubtotal.toFixed(2),
                     discountApplied: isCouponApplied,
                     discountPercentage: discountPercentage,
                     discountAmount: discountAmount.toFixed(2),
                     finalTotal: finalTotal.toFixed(2)
                 };
                 parsedOrderDetailsInput.value = JSON.stringify(parsedDetails, null, 2);


                 discountAppliedInput.value = isCouponApplied ? `Yes (${discountPercentage}%)` : 'No';
                 finalOrderTotalInput.value = finalTotal.toFixed(2);

             }
         }

         // Function to reset coupon state
         function resetCoupon() {
             discountPercentage = 0;
             isCouponApplied = false;
             couponCodeInput.value = '';
             couponMessageDiv.textContent = ''; // Clear message
             couponMessageDiv.className = ''; // Remove success/error classes
             renderOrderSummaryReview(); // Update display
         }

         // Function to apply the coupon
         function applyCoupon() {
             const enteredCode = couponCodeInput.value.trim().toUpperCase();
             const validCouponCode = "OFFER10"; // The secret coupon code

             if (enteredCode === validCouponCode) {
                 if (!isCouponApplied) { // Only apply if not already applied
                    discountPercentage = 10;
                    isCouponApplied = true;
                    couponMessageDiv.textContent = 'Coupon Applied! 10% discount added.';
                    couponMessageDiv.className = 'success';
                    renderOrderSummaryReview();
                 } else {
                     couponMessageDiv.textContent = 'Coupon is already applied.';
                     couponMessageDiv.className = 'error'; // Or a different class for already applied
                 }
             } else {
                 if (isCouponApplied) { // If a valid coupon was applied, reset it first
                     resetCoupon();
                     couponMessageDiv.textContent = 'Invalid coupon code. Discount removed.';
                     couponMessageDiv.className = 'error';
                 } else { // No coupon was applied or it was invalid
                     couponMessageDiv.textContent = 'Invalid coupon code.';
                     couponMessageDiv.className = 'error';
                 }
                  renderOrderSummaryReview(); // Update display
             }
         }


        // --- Event listener for interactions within the #products section using delegation ---
        document.getElementById('products').addEventListener('click', function(event) {
            const target = event.target;

            // --- Handle Clicks on Category Cards ---
            const categoryCard = target.closest('.product.category-card');
            if (categoryCard && !categoryCard.classList.contains('product-item')) { // Ensure it's a category card, not a product item
                const categoryId = categoryCard.dataset.categoryTarget;
                if (categoryId) {
                    showProductContainer(categoryId);
                    return;
                }
            }

            // --- Handle Clicks on "Add to Cart" Buttons ---
            if (target.classList.contains('add-to-cart-button')) {
                const productElement = target.closest('.product');
                if (productElement) {
                    const product = {
                        id: target.dataset.productId,
                        name: target.dataset.productName,
                        price: parseFloat(target.dataset.productPrice)
                    };
                    if (product.id && product.name && !isNaN(product.price)) {
                         addToCart(product);
                    } else {
                         console.error("Missing or invalid product data for Add to Cart:", product);
                         alert("Could not add item to cart. Missing product details.");
                    }
                }
                return;
            }

            // --- Handle Clicks on Product Images for Modal ---
            // Check if the clicked element is an IMG inside a .product card within the product grid
            if (target.tagName === 'IMG' && target.closest('.category-products-grid .product')) {
                 modal.style.display = 'flex';
                 modalImg.src = target.src;
                 modalImg.alt = target.alt;
                 // Add focus to the close button for accessibility
                 modal.querySelector('.close').focus();
            }
        });

        // Add keydown listener to Category Cards for accessibility (Space or Enter)
         document.getElementById('products').addEventListener('keydown', function(event) {
             const target = event.target;
              const categoryCard = target.closest('.product.category-card');
             if (categoryCard && !categoryCard.classList.contains('product-item') && (event.key === ' ' || event.key === 'Enter')) {
                  event.preventDefault();
                  const categoryId = categoryCard.dataset.categoryTarget;
                  if (categoryId) {
                      showProductContainer(categoryId);
                  }
             }
              // Add keydown for product images too if needed, but click is often sufficient with tab index
         });


         // Event listener for "Remove" buttons in the cart modal using delegation
         cartItemsList.addEventListener('click', function(event) {
             const target = event.target;
             if (target.classList.contains('remove-item')) {
                 const productId = target.dataset.productId;
                 if (productId) {
                     removeFromCart(productId);
                      // Re-render cart after removal
                     renderCart();
                 }
             }
         });
          // Add keydown listener for remove buttons (Space or Enter)
          cartItemsList.addEventListener('keydown', function(event) {
             const target = event.target;
             if (target.classList.contains('remove-item') && (event.key === ' ' || event.key === 'Enter')) {
                  event.preventDefault();
                 const productId = target.dataset.productId;
                 if (productId) {
                     removeFromCart(productId);
                      // Re-render cart after removal
                     renderCart();
                 }
             }
         });


        // Event listeners for Cart Modal
        cartIcon.addEventListener('click', function() {
            cartModal.style.display = 'flex';
             renderCart(); // Render cart content every time modal opens
             // Add focus to the close button for accessibility
            closeCartModalBtn.focus();
        });
         // Add keydown listener for Cart Icon (Space or Enter)
         cartIcon.addEventListener('keydown', function(e) {
              if (e.key === ' ' || e.key === 'Enter') {
                   e.preventDefault();
                   cartModal.style.display = 'flex';
                   renderCart();
                   closeCartModalBtn.focus();
              }
         });


        closeCartModalBtn.addEventListener('click', function() {
            cartModal.style.display = 'none'; // Hide modal
        });


        // Close modal if user clicks outside of it
        cartModal.addEventListener('click', function(e) {
            if (e.target === cartModal) {
                cartModal.style.display = 'none';
            }
        });

        // Event listener for the "Proceed to Inquiry" button (in the cart modal)
        checkoutButton.addEventListener('click', function() {
            showBillingSection(); // Show the billing section
        });

         // Event listener for the coupon code apply button
         applyCouponButton.addEventListener('click', applyCoupon);

         // Allow applying coupon by pressing Enter in the input field
         couponCodeInput.addEventListener('keypress', function(event) {
             if (event.key === 'Enter') {
                 event.preventDefault();
                 applyCoupon();
             }
         });


         // Event listener for the FIRST click on the billing form button
         proceedToPaymentButton.addEventListener('click', function(event) {
             showPaymentInfo(); // Validate and show payment info
         });


         // Event listener for the SECOND click on the billing form button (now submitOrderButton)
         // This listener is called when the submitOrderButton is clicked.
         document.getElementById('billingForm').addEventListener('submit', function(event) {
             const submitButton = document.getElementById('submitOrderButton');
             submitButton.textContent = 'Submitting...';
             submitButton.disabled = true;

              // Clear the cart after the form submission attempt.
              cart = [];
              saveCart();
              updateCartUI(); // Update header count immediately
              resetCoupon(); // Reset coupon state

              // The form will submit normally via formsubmit.co's action
              // The _next parameter will redirect the user.
         });

        // --- Add Back Button Listeners ---
        document.querySelectorAll('.back-to-categories').forEach(button => {
            button.addEventListener('click', function(event) {
                event.preventDefault();
                showCategoryGrid();
            });
             // Add keydown listener for accessibility
             button.addEventListener('keydown', function(e) {
                  if (e.key === ' ' || e.key === 'Enter') {
                       e.preventDefault();
                       showCategoryGrid();
                  }
             });
        });

        // Listener for the back to cart button in the billing section
        document.querySelector('.back-to-cart').addEventListener('click', function(event) {
            event.preventDefault();
            hideBillingSection();
        });
         // Add keydown listener for accessibility
          document.querySelector('.back-to-cart').addEventListener('keydown', function(e) {
              if (e.key === ' ' || e.key === 'Enter') {
                   e.preventDefault();
                   hideBillingSection();
              }
          });


        // --- Section Scroll Animation (IntersectionObserver) ---
        // Ensure this runs after the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            // Exclude modals and the billing section
            const sections = document.querySelectorAll('section:not(#imageModal):not(#cartModal):not(#billingSection)');

            const observerOptions = {
                root: null, // viewport as the root
                rootMargin: '0px',
                threshold: 0.1 // 10% of the section must be visible
            };

            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        // Optional: Stop observing once it's visible
                        // observer.unobserve(entry.target);
                    } else {
                         // Optional: Remove class when it goes out of view for re-animation on scroll back up
                         // entry.target.classList.remove('is-visible');
                    }
                });
            }, observerOptions);

            sections.forEach(section => {
                observer.observe(section);
            });
        });
         // --- End Section Scroll Animation ---


         // --- Scroll to Top Button Logic ---
         const scrollToTopButton = document.querySelector('.scroll-to-top');

         if (scrollToTopButton) {
              window.addEventListener('scroll', () => {
                  // Show button after scrolling down a bit (e.g., 200px from the top)
                  if (window.scrollY > 200) {
                      scrollToTopButton.classList.add('visible');
                  } else {
                      scrollToTopButton.classList.remove('visible');
                  }
              });

              scrollToTopButton.addEventListener('click', (e) => {
                  e.preventDefault();
                  window.scrollTo({
                      top: 0,
                      behavior: 'smooth'
                  });
              });

               // Add keydown listener for accessibility (Space or Enter)
               scrollToTopButton.addEventListener('keydown', function(e) {
                   if (e.key === ' ' || e.key === 'Enter') {
                       e.preventDefault();
                       window.scrollTo({
                           top: 0,
                           behavior: 'smooth'
                       });
                   }
               });
         }
         // --- End Scroll to Top Button Logic ---


        // Initializers
        document.addEventListener('DOMContentLoaded', () => {
            showCategoryGrid(); // Make sure categories are shown initially
            updateCartUI(); // Load and display initial cart state
        });

        // Ensure smooth scrolling for header navigation links
         document.querySelectorAll('nav ul li a[href^="#"]').forEach(anchor => {
             anchor.addEventListener('click', function (e) {
                 e.preventDefault();

                 const targetId = this.getAttribute('href');
                 const targetElement = document.querySelector(targetId);

                 if (targetElement) {
                     const headerHeight = document.querySelector('.header').offsetHeight; // Get dynamic header height
                     const elementPosition = targetElement.getBoundingClientRect().top;
                     // Removed offsetHeight subtraction to scroll directly to the section top
                     const offsetPosition = elementPosition + window.scrollY;


                     window.scrollTo({
                         top: offsetPosition,
                         behavior: 'smooth'
                     });
                 }
             });
         });


    </script>

</body>
</html>
